{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/store/images.js"],"names":["imageLayerToImage","page","layer","sketch","layerDuplicate","duplicate","parent","scales","formats","output","NSTemporaryDirectory","remove","id","image","src","fillGradientToImage","activeGradients","style","fills","filter","fill","enabled","fillType","topGradient","length","gradientImage","ShapePath","frame","borders","fillImageToImage","width","nsimage","size","height","fillImage","Image","x","y","createTempImages","layers","images","forEach","type","push","pattern","getImages","layerImages"],"mappings":"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","file":"resources_store_images.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./resources/store/images.js\");\n","const imageLayerToImage = (page, layer, sketch) => {\n    const layerDuplicate = layer.duplicate();\n    // reset asset position on artboard\n    layerDuplicate.parent = page;\n    // export asset to temp folder\n    sketch.export(layerDuplicate, {\n        scales: '1, 2',\n        formats: 'png',\n        // @ts-ignore\n        output: NSTemporaryDirectory(),\n        ['use-id-for-name']: true,\n        ['save-for-web']: true,\n        overwriting: true\n    });\n    // remove asset artboard from page\n    layerDuplicate.remove();\n    // return AppAsset\n    return {\n        id: layer.image.id,\n        src: {\n            // @ts-ignore\n            [`1x`]: `${NSTemporaryDirectory()}${layerDuplicate.id}.png`,\n            // @ts-ignore\n            [`2x`]: `${NSTemporaryDirectory()}${layerDuplicate.id}@2x.png`\n        },\n    };\n};\nconst fillGradientToImage = (page, layer, sketch) => {\n    // get enabled gradients\n    const activeGradients = layer.style.fills.filter((fill) => {\n        return fill.enabled && fill.fillType === 'Gradient';\n    });\n    // get top gradient fill\n    const topGradient = activeGradients[activeGradients.length - 1];\n    // create new layer with gradient\n    const gradientImage = new sketch.ShapePath({\n        parent: page,\n        frame: layer.frame,\n        style: {\n            fills: [topGradient],\n            borders: []\n        }\n    });\n    // export image to temp dir\n    sketch.export(gradientImage, {\n        scales: '1, 2',\n        formats: 'png',\n        // @ts-ignore\n        output: NSTemporaryDirectory(),\n        ['use-id-for-name']: true,\n        ['save-for-web']: true,\n        overwriting: true\n    });\n    // remove image from page\n    gradientImage.remove();\n    // return final image\n    return {\n        id: layer.id,\n        src: {\n            // @ts-ignore\n            [`1x`]: `${NSTemporaryDirectory()}${gradientImage.id}.png`,\n            // @ts-ignore\n            [`2x`]: `${NSTemporaryDirectory()}${gradientImage.id}@2x.png`,\n        }\n    };\n};\nconst fillImageToImage = (page, image, sketch) => {\n    // get image size\n    const width = image.nsimage.size().width;\n    const height = image.nsimage.size().height;\n    // create image from fill image\n    const fillImage = new sketch.Image({\n        image: image,\n        parent: page,\n        frame: { width, height, x: 0, y: 0 }\n    });\n    // export image to temp dir\n    sketch.export(fillImage, {\n        scales: '1, 2',\n        formats: 'png',\n        // @ts-ignore\n        output: NSTemporaryDirectory(),\n        ['use-id-for-name']: true,\n        ['save-for-web']: true,\n        overwriting: true\n    });\n    // remove image from page\n    fillImage.remove();\n    // return final image\n    return {\n        id: image.id,\n        src: {\n            // @ts-ignore\n            [`1x`]: `${NSTemporaryDirectory()}${fillImage.id}.png`,\n            // @ts-ignore\n            [`2x`]: `${NSTemporaryDirectory()}${fillImage.id}@2x.png`\n        }\n    };\n};\nconst createTempImages = (page, layers, sketch, images = []) => {\n    if (layers.length > 0) {\n        layers.forEach((layer) => {\n            if (layer.type === 'Group') {\n                createTempImages(page, layer.layers, sketch, images);\n            }\n            else if (layer.type === 'Image') {\n                const image = imageLayerToImage(page, layer, sketch);\n                images.push(image);\n            }\n            else if (layer.type === 'Shape' || layer.type === 'ShapePath') {\n                layer.style.fills.forEach((fill) => {\n                    if (fill.pattern.image !== null && fill.enabled) {\n                        // create image from fill image\n                        const fillImage = fillImageToImage(page, fill.pattern.image, sketch);\n                        // push final image\n                        images.push(fillImage);\n                    }\n                    else if (fill.fillType === 'Gradient' && fill.enabled) {\n                        // create gradient image\n                        const gradientImage = fillGradientToImage(page, layer, sketch);\n                        // push final image\n                        images.push(gradientImage);\n                    }\n                });\n            }\n        });\n    }\n    return images;\n};\nconst getImages = (page, layers, sketch) => {\n    const layerImages = createTempImages(page, layers, sketch);\n    return layerImages;\n};\nexport default getImages;\n"],"sourceRoot":""}