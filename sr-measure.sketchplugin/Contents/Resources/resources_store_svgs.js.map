{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/store/svgs.js"],"names":["layerToSVG","page","layer","sketch","id","borderSize","activeBorders","style","borders","filter","border","enabled","forEach","thickness","layerDuplicate","duplicate","parent","opacity","transform","rotation","flippedHorizontally","flippedVertically","formats","output","NSTemporaryDirectory","frame","width","Math","round","height","x","y","remove","src","layerToShape","name","shapeReplacement","Shape","groupToShape","prefix","newName","substr","length","trim","createTempSVGs","layers","svgs","index","type","startsWith","newShape","svg","push","splice","hasOpenPath","closed","notRectangle","shapeType","notOval","isOddShape","hasDashPattern","borderOptions","dashPattern","getSVGs","shapeSvgs"],"mappings":"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","file":"resources_store_svgs.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./resources/store/svgs.js\");\n","const layerToSVG = (page, layer, sketch, id) => {\n    let borderSize = 0;\n    const activeBorders = layer.style.borders.filter((border) => border.enabled);\n    if (activeBorders) {\n        activeBorders.forEach((border) => {\n            if (border.thickness > borderSize) {\n                borderSize = border.thickness;\n            }\n        });\n    }\n    // duplicate layer\n    const layerDuplicate = layer.duplicate();\n    // set parent to page\n    layerDuplicate.parent = page;\n    // opacity and transforms will be applied on the div, not svg\n    layerDuplicate.style.opacity = 1;\n    layerDuplicate.transform.rotation = 0;\n    layerDuplicate.transform.flippedHorizontally = false;\n    layerDuplicate.transform.flippedVertically = false;\n    // export duplicate layer\n    sketch.export(layerDuplicate, {\n        formats: 'svg',\n        // @ts-ignore\n        output: NSTemporaryDirectory(),\n        ['use-id-for-name']: true,\n        overwriting: true\n    });\n    // update layer frame to include bordersize\n    layer.frame.width = Math.round(layer.frame.width + (borderSize * 1.5));\n    layer.frame.height = Math.round(layer.frame.height + (borderSize * 1.5));\n    layer.frame.x = Math.round(layer.frame.x - ((borderSize * 1.5) / 2));\n    layer.frame.y = Math.round(layer.frame.y - ((borderSize * 1.5) / 2));\n    // remove duplicate layer\n    layerDuplicate.remove();\n    // return AppAsset\n    return {\n        id: id ? id : layer.id,\n        // @ts-ignore\n        src: `${NSTemporaryDirectory()}${layerDuplicate.id}.svg`\n    };\n};\nconst layerToShape = (layer, sketch, name) => {\n    // create new shape\n    const shapeReplacement = new sketch.Shape({\n        name: name ? name : layer.name,\n        frame: layer.frame,\n        style: layer.style,\n        transform: {\n            rotation: layer.transform.rotation,\n            flippedHorizontally: layer.transform.flippedHorizontally,\n            flippedVertically: layer.transform.flippedVertically\n        }\n    });\n    // return new shape\n    return shapeReplacement;\n};\nconst groupToShape = (layer, sketch, prefix) => {\n    // remove prefix from name\n    const newName = layer.name.substr(prefix.length, layer.name.length - prefix.length).trim();\n    // create new shape\n    const shapeReplacement = layerToShape(layer, sketch, newName);\n    // return new shape\n    return shapeReplacement;\n};\nconst createTempSVGs = (page, layers, sketch, svgs = []) => {\n    if (layers.length > 0) {\n        layers.forEach((layer, index) => {\n            if (layer.type === 'Group') {\n                if (layer.name.startsWith('[srm.svg]')) {\n                    // create shape to replace group\n                    const newShape = groupToShape(layer, sketch, '[srm.svg]');\n                    // create svg from group\n                    const svg = layerToSVG(page, layer, sketch, newShape.id);\n                    svgs.push(svg);\n                    // splice in new shape, splice out group\n                    layers.splice(index, 1, newShape);\n                }\n                else {\n                    createTempSVGs(page, layer.layers, sketch, svgs);\n                }\n            }\n            else if (layer.type === 'Shape') {\n                const svg = layerToSVG(page, layer, sketch);\n                svgs.push(svg);\n            }\n            else if (layer.type === 'ShapePath') {\n                const hasOpenPath = !layer.closed;\n                const notRectangle = layer.shapeType !== 'Rectangle';\n                const notOval = layer.shapeType !== 'Oval';\n                const isOddShape = notRectangle && notOval;\n                const hasDashPattern = layer.style.borderOptions.dashPattern.length > 0;\n                if (hasOpenPath || isOddShape || hasDashPattern) {\n                    // turn complex shapePaths into shapes\n                    // makes things easier when it comes to styling the divs\n                    const shapeReplacement = layerToShape(layer, sketch);\n                    const svg = layerToSVG(page, layer, sketch, shapeReplacement.id);\n                    svgs.push(svg);\n                    layers.splice(index, 1, shapeReplacement);\n                }\n            }\n        });\n    }\n    return svgs;\n};\nconst getSVGs = (page, layers, sketch) => {\n    let shapeSvgs = createTempSVGs(page, layers, sketch);\n    return shapeSvgs;\n};\nexport default getSVGs;\n"],"sourceRoot":""}