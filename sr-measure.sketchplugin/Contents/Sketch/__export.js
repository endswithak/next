var globalThis=this,global=this;function __skpm_run(key,context){globalThis.context=context;try{var exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=22)}([function(e,t,n){var r=NSThread.mainThread().threadDictionary();e.exports.getWebview=function(e){return n(2).fromId(e)},e.exports.isWebviewPresent=function(e){return!!r[e]},e.exports.sendToWebview=function(t,n){if(e.exports.isWebviewPresent(t)){for(var a=null,i=r[t].contentView().subviews(),o=0;o<i.length;o+=1)a||i[o].isKindOfClass(WKInspectorWKWebView)||!i[o].isKindOfClass(WKWebView)||(a=i[o]);if(!a||!a.evaluateJavaScript_completionHandler)throw new Error("Webview "+t+" not found");a.evaluateJavaScript_completionHandler(n,null)}}},function(e,t){e.exports={JS_BRIDGE:"__skpm_sketchBridge",JS_BRIDGE_RESULT_SUCCESS:"__skpm_sketchBridge_success",JS_BRIDGE_RESULT_ERROR:"__skpm_sketchBridge_error",START_MOVING_WINDOW:"__skpm_startMovingWindow",EXECUTE_JAVASCRIPT:"__skpm_executeJS",EXECUTE_JAVASCRIPT_SUCCESS:"__skpm_executeJS_success_",EXECUTE_JAVASCRIPT_ERROR:"__skpm_executeJS_error_"}},function(e,t,n){var r=n(6),a=n(10),i=n(11),o=n(12),c=n(13),s=n(14),u=n(15),l=n(7),f=n(16);function d(e){var t=(e=e||{}).identifier||NSUUID.UUID().UUIDString(),n=NSThread.mainThread().threadDictionary(),h=d.fromId(t);if(h)return h;var p=new r;if(p.id=t,e.modal&&!e.parent)throw new Error("A modal needs to have a parent.");var g=coscript.createFiber(),m=e.width||800,v=e.height||600,b=NSScreen.screens().firstObject().frame(),y=NSMakeRect(void 0!==e.x?e.x:Math.round((NSWidth(b)-m)/2),void 0!==e.y?NSHeight(b)-e.y:Math.round((NSHeight(b)-v)/2),m,v);e.titleBarStyle&&"default"!==e.titleBarStyle&&(e.frame=!1);var w="textured"!==e.windowType,S=NSTitledWindowMask;!1!==e.minimizable&&(S|=NSMiniaturizableWindowMask),!1!==e.closable&&(S|=NSClosableWindowMask),!1!==e.resizable&&(S|=NSResizableWindowMask),w&&!e.transparent&&!1!==e.frame||(S|=NSTexturedBackgroundWindowMask);var _=NSPanel.alloc().initWithContentRect_styleMask_backing_defer(y,S,NSBackingStoreBuffered,!0),N=WKWebViewConfiguration.alloc().init(),M=WKWebView.alloc().initWithFrame_configuration(CGRectMake(0,0,e.width||800,e.height||600),N);if(s(M),M.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),a(p,_,M),i(p,_,M),f(p,_,M,e),"desktop"===e.windowType&&(_.setLevel(kCGDesktopWindowLevel-1),_.setCollectionBehavior(NSWindowCollectionBehaviorCanJoinAllSpaces|NSWindowCollectionBehaviorStationary|NSWindowCollectionBehaviorIgnoresCycle)),void 0===e.minWidth&&void 0===e.minHeight||p.setMinimumSize(e.minWidth||0,e.minHeight||0),void 0===e.maxWidth&&void 0===e.maxHeight||p.setMaximumSize(e.maxWidth||1e4,e.maxHeight||1e4),e.transparent||!1===e.frame){_.titlebarAppearsTransparent=!0,_.titleVisibility=NSWindowTitleHidden,_.setOpaque(0),_.isMovableByWindowBackground=!0;var k=NSToolbar.alloc().initWithIdentifier("titlebarStylingToolbar");k.setShowsBaselineSeparator(!1),_.setToolbar(k)}if("hiddenInset"===e.titleBarStyle){var C=NSToolbar.alloc().initWithIdentifier("titlebarStylingToolbar");C.setShowsBaselineSeparator(!1),_.setToolbar(C)}!1!==e.frame&&e.useContentSize||p.setSize(m,v),e.center&&p.center(),e.alwaysOnTop&&p.setAlwaysOnTop(!0),e.fullscreen&&p.setFullScreen(!0),p.setFullScreenable(!!e.fullscreenable);let x=e.title;!1===e.frame?x=void 0:void 0===x&&"undefined"!=typeof __command&&__command.pluginBundle()&&(x=__command.pluginBundle().name()),x&&p.setTitle(x);var E=e.backgroundColor;e.transparent&&(E=NSColor.clearColor()),!E&&!1===e.frame&&e.vibrancy&&(E=NSColor.clearColor()),p._setBackgroundColor(E||NSColor.windowBackgroundColor()),!1===e.hasShadow&&p.setHasShadow(!1),void 0!==e.opacity&&p.setOpacity(e.opacity),e.webPreferences=e.webPreferences||{},M.configuration().preferences().setValue_forKey(!1!==e.webPreferences.devTools,"developerExtrasEnabled"),M.configuration().preferences().setValue_forKey(!1!==e.webPreferences.javascript,"javaScriptEnabled"),M.configuration().preferences().setValue_forKey(!!e.webPreferences.plugins,"plugInsEnabled"),M.configuration().preferences().setValue_forKey(e.webPreferences.minimumFontSize||0,"minimumFontSize"),e.webPreferences.zoomFactor&&M.setMagnification(e.webPreferences.zoomFactor);var R=_.contentView();return!1!==e.frame?(M.setFrame(R.bounds()),R.addSubview(M)):(R.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),o(R,R.superview()),M.setFrame(R.bounds()),R.addSubview(M),_.standardWindowButton(NSWindowFullScreenButton)&&_.standardWindowButton(NSWindowFullScreenButton).setHidden(!0),e.titleBarStyle&&"default"!==e.titleBarStyle||(_.standardWindowButton(NSWindowZoomButton).setHidden(!0),_.standardWindowButton(NSWindowMiniaturizeButton).setHidden(!0),_.standardWindowButton(NSWindowCloseButton).setHidden(!0),_.standardWindowButton(NSWindowZoomButton).setEnabled(!1))),e.vibrancy&&p.setVibrancy(e.vibrancy),p.setMaximizable(!1!==e.maximizable),_.setHidesOnDeactivate(!1!==e.hidesOnDeactivate),e.remembersWindowFrame&&(_.setFrameAutosaveName(t),_.setFrameUsingName_force(_.frameAutosaveName(),!1)),e.acceptsFirstMouse&&p.on("focus",(function(e){e.type()===NSEventTypeLeftMouseDown&&p.webContents.executeJavaScript(c(M,e)).catch(()=>{})})),l.injectScript(M),u.injectScript(M),u.setupHandler(p),!1!==e.show&&p.show(),p.on("closed",(function(){p._destroyed=!0,n.removeObjectForKey(t);var e=n[t+".themeObserver"];e&&(NSApplication.sharedApplication().removeObserver_forKeyPath(e,"effectiveAppearance"),n.removeObjectForKey(t+".themeObserver")),g.cleanup()})),n[t]=_,g.onCleanup((function(){p._destroyed||p.destroy()})),p}d.fromId=function(e){var t=NSThread.mainThread().threadDictionary();if(t[e])return d.fromPanel(t[e],e)},d.fromPanel=function(e,t){var n=new r;if(n.id=t,!e||!e.contentView)throw new Error("needs to pass an NSPanel");for(var o=null,c=e.contentView().subviews(),s=0;s<c.length;s+=1)o||c[s].isKindOfClass(WKInspectorWKWebView)||!c[s].isKindOfClass(WKWebView)||(o=c[s]);if(!o)throw new Error("The panel needs to have a webview");return a(n,e,o),i(n,e,o),n},e.exports=d},function(e,t){e.exports=require("sketch/ui")},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/925ae79a722a023b4075f164dd3b2396.css"},function(e,t){e.exports=require("sketch/dom")},function(e,t){e.exports=require("events")},function(e,t,n){(function(t){var r=n(1);e.exports=function(n,a){return function i(o,c,s){"function"==typeof c&&(s=c,c=!1);var u=coscript.createFiber();return n.navigationDelegate().state&&0==n.navigationDelegate().state.wasReady?new t((function(e,t){a.once("ready-to-show",(function(){i(o,c,s).then(e).catch(t),u.cleanup()}))})):new t((function(t,i){var c=Math.random();a.webContents.on(r.EXECUTE_JAVASCRIPT_SUCCESS+c,(function(e){try{s&&s(null,e),t(e)}catch(n){i(n)}u.cleanup()})),a.webContents.on(r.EXECUTE_JAVASCRIPT_ERROR+c,(function(e){try{s?(s(e),t()):i(e)}catch(n){i(n)}u.cleanup()})),n.evaluateJavaScript_completionHandler(e.exports.wrapScript(o,c),null)}))}},e.exports.wrapScript=function(e,t){return"window."+r.EXECUTE_JAVASCRIPT+"("+t+", "+JSON.stringify(e)+")"},e.exports.injectScript=function(e){var t="window."+r.EXECUTE_JAVASCRIPT+' = function(id, script) {  try {    var res = eval(script);    if (res && typeof res.then === "function" && typeof res.catch === "function") {      res.then(function (res2) {        window.postMessage("'+r.EXECUTE_JAVASCRIPT_SUCCESS+'" + id, res2);      })      .catch(function (err) {        window.postMessage("'+r.EXECUTE_JAVASCRIPT_ERROR+'" + id, err);      })    } else {      window.postMessage("'+r.EXECUTE_JAVASCRIPT_SUCCESS+'" + id, res);    }  } catch (err) {    window.postMessage("'+r.EXECUTE_JAVASCRIPT_ERROR+'" + id, err);  }}',n=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);e.configuration().userContentController().addUserScript(n)}}).call(this,n(8))},function(e,t){function n(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],u(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(a){return void o(t.promise,a)}i(t.promise,r)}else(1===e._state?i:o)(t.promise,e._value)}))):e._deferreds.push(t)}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void c(e);if("function"==typeof n)return void u(n.bind(t),e)}e._state=1,e._value=t,c(e)}catch(a){o(e,a)}}function o(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&r._immediateFn((function(){e._handled||r._unhandledRejectionFn(e._value,e)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function s(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function u(e,t){var n=!1;try{e((function(e){n?r._multipleResolvesFn("resolve",t,e):(n=!0,i(t,e))}),(function(e){n?r._multipleResolvesFn("reject",t,e):(n=!0,o(t,e))}))}catch(a){if(n)return void r._multipleResolvesFn("reject",t,a);n=!0,o(t,a)}}r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var r=new this.constructor(n);return a(this,new s(e,t,r)),r},r.prototype.finally=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},r.all=function(e){return new r((function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var a=r.length;function i(e,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var c=o.then;if("function"==typeof c)return void c.call(o,(function(t){i(e,t)}),n)}r[e]=o,0==--a&&t(r)}catch(s){n(s)}}for(var o=0;o<r.length;o++)i(o,r[o])}))},r.resolve=function(e){return e&&"object"==typeof e&&e.constructor===r?e:new r((function(t){t(e)}))},r.reject=function(e){return new r((function(t,n){n(e)}))},r.race=function(e){return new r((function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.race accepts an array"));for(var a=0,i=e.length;a<i;a++)r.resolve(e[a]).then(t,n)}))},r._immediateFn=setImmediate,r._unhandledRejectionFn=function(e,t){"undefined"!=typeof process&&process.listenerCount&&(process.listenerCount("unhandledRejection")||process.listenerCount("uncaughtException"))?(process.emit("unhandledRejection",e,t),process.emit("uncaughtException",e,"unhandledRejection")):"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},r._multipleResolvesFn=function(e,t,n){"undefined"!=typeof process&&process.emit&&process.emit("multipleResolves",e,t,n)},e.exports=r},function(e,t,n){e.exports=function(){"use strict";for(var e=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e<t?t:e>n?n:e},t={},n=0,r=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];n<r.length;n+=1){var a=r[n];t["[object "+a+"]"]=a.toLowerCase()}var i=function(e){return t[Object.prototype.toString.call(e)]||"object"},o=Math.PI,c={clip_rgb:function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var n=0;n<=3;n++)n<3?((t[n]<0||t[n]>255)&&(t._clipped=!0),t[n]=e(t[n],0,255)):3===n&&(t[n]=e(t[n],0,1));return t},limit:e,type:i,unpack:function(e,t){return void 0===t&&(t=null),e.length>=3?Array.prototype.slice.call(e):"object"==i(e[0])&&t?t.split("").filter((function(t){return void 0!==e[0][t]})).map((function(t){return e[0][t]})):e[0]},last:function(e){if(e.length<2)return null;var t=e.length-1;return"string"==i(e[t])?e[t].toLowerCase():null},PI:o,TWOPI:2*o,PITHIRD:o/3,DEG2RAD:o/180,RAD2DEG:180/o},s={format:{},autodetect:[]},u=c.last,l=c.clip_rgb,f=c.type,d=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=this;if("object"===f(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var r=u(e),a=!1;if(!r){a=!0,s.sorted||(s.autodetect=s.autodetect.sort((function(e,t){return t.p-e.p})),s.sorted=!0);for(var i=0,o=s.autodetect;i<o.length;i+=1){var c=o[i];if(r=c.test.apply(c,e))break}}if(!s.format[r])throw new Error("unknown format: "+e);var d=s.format[r].apply(null,a?e:e.slice(0,-1));n._rgb=l(d),3===n._rgb.length&&n._rgb.push(1)};d.prototype.toString=function(){return"function"==f(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var h=d,p=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(p.Color,[null].concat(e)))};p.Color=h,p.version="2.1.0";var g=p,m=c.unpack,v=Math.max,b=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=m(e,"rgb"),r=n[0],a=n[1],i=n[2],o=1-v(r/=255,v(a/=255,i/=255)),c=o<1?1/(1-o):0,s=(1-r-o)*c,u=(1-a-o)*c,l=(1-i-o)*c;return[s,u,l,o]},y=c.unpack,w=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=y(e,"cmyk"))[0],r=e[1],a=e[2],i=e[3],o=e.length>4?e[4]:1;return 1===i?[0,0,0,o]:[n>=1?0:255*(1-n)*(1-i),r>=1?0:255*(1-r)*(1-i),a>=1?0:255*(1-a)*(1-i),o]},S=c.unpack,_=c.type;h.prototype.cmyk=function(){return b(this._rgb)},g.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["cmyk"])))},s.format.cmyk=w,s.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=S(e,"cmyk"),"array"===_(e)&&4===e.length)return"cmyk"}});var N=c.unpack,M=c.last,k=function(e){return Math.round(100*e)/100},C=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=N(e,"hsla"),r=M(e)||"lsa";return n[0]=k(n[0]||0),n[1]=k(100*n[1])+"%",n[2]=k(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},x=c.unpack,E=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=x(e,"rgba"))[0],r=e[1],a=e[2];n/=255,r/=255,a/=255;var i,o,c=Math.min(n,r,a),s=Math.max(n,r,a),u=(s+c)/2;return s===c?(i=0,o=Number.NaN):i=u<.5?(s-c)/(s+c):(s-c)/(2-s-c),n==s?o=(r-a)/(s-c):r==s?o=2+(a-n)/(s-c):a==s&&(o=4+(n-r)/(s-c)),(o*=60)<0&&(o+=360),e.length>3&&void 0!==e[3]?[o,i,u,e[3]]:[o,i,u]},R=c.unpack,W=c.last,F=Math.round,A=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=R(e,"rgba"),r=W(e)||"rgb";return"hsl"==r.substr(0,3)?C(E(n),r):(n[0]=F(n[0]),n[1]=F(n[1]),n[2]=F(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")},P=c.unpack,T=Math.round,B=function(){for(var e,t=[],n=arguments.length;n--;)t[n]=arguments[n];var r,a,i,o=(t=P(t,"hsl"))[0],c=t[1],s=t[2];if(0===c)r=a=i=255*s;else{var u=[0,0,0],l=[0,0,0],f=s<.5?s*(1+c):s+c-s*c,d=2*s-f,h=o/360;u[0]=h+1/3,u[1]=h,u[2]=h-1/3;for(var p=0;p<3;p++)u[p]<0&&(u[p]+=1),u[p]>1&&(u[p]-=1),6*u[p]<1?l[p]=d+6*(f-d)*u[p]:2*u[p]<1?l[p]=f:3*u[p]<2?l[p]=d+(f-d)*(2/3-u[p])*6:l[p]=d;r=(e=[T(255*l[0]),T(255*l[1]),T(255*l[2])])[0],a=e[1],i=e[2]}return t.length>3?[r,a,i,t[3]]:[r,a,i,1]},O=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,L=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,D=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,I=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,U=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,z=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,V=Math.round,j=function(e){var t;if(e=e.toLowerCase().trim(),s.format.named)try{return s.format.named(e)}catch(g){}if(t=e.match(O)){for(var n=t.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(t=e.match(L)){for(var a=t.slice(1,5),i=0;i<4;i++)a[i]=+a[i];return a}if(t=e.match(D)){for(var o=t.slice(1,4),c=0;c<3;c++)o[c]=V(2.55*o[c]);return o[3]=1,o}if(t=e.match(I)){for(var u=t.slice(1,5),l=0;l<3;l++)u[l]=V(2.55*u[l]);return u[3]=+u[3],u}if(t=e.match(U)){var f=t.slice(1,4);f[1]*=.01,f[2]*=.01;var d=B(f);return d[3]=1,d}if(t=e.match(z)){var h=t.slice(1,4);h[1]*=.01,h[2]*=.01;var p=B(h);return p[3]=+t[4],p}};j.test=function(e){return O.test(e)||L.test(e)||D.test(e)||I.test(e)||U.test(e)||z.test(e)};var G=j,J=c.type;h.prototype.css=function(e){return A(this._rgb,e)},g.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["css"])))},s.format.css=G,s.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===J(e)&&G.test(e))return"css"}});var H=c.unpack;s.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=H(e,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},g.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["gl"])))},h.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var q=c.unpack,K=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=q(e,"rgb"),a=r[0],i=r[1],o=r[2],c=Math.min(a,i,o),s=Math.max(a,i,o),u=s-c,l=100*u/255,f=c/(255-u)*100;return 0===u?n=Number.NaN:(a===s&&(n=(i-o)/u),i===s&&(n=2+(o-a)/u),o===s&&(n=4+(a-i)/u),(n*=60)<0&&(n+=360)),[n,l,f]},X=c.unpack,Z=Math.floor,$=function(){for(var e,t,n,r,a,i,o=[],c=arguments.length;c--;)o[c]=arguments[c];var s,u,l,f=(o=X(o,"hcg"))[0],d=o[1],h=o[2];h*=255;var p=255*d;if(0===d)s=u=l=h;else{360===f&&(f=0),f>360&&(f-=360),f<0&&(f+=360);var g=Z(f/=60),m=f-g,v=h*(1-d),b=v+p*(1-m),y=v+p*m,w=v+p;switch(g){case 0:s=(e=[w,y,v])[0],u=e[1],l=e[2];break;case 1:s=(t=[b,w,v])[0],u=t[1],l=t[2];break;case 2:s=(n=[v,w,y])[0],u=n[1],l=n[2];break;case 3:s=(r=[v,b,w])[0],u=r[1],l=r[2];break;case 4:s=(a=[y,v,w])[0],u=a[1],l=a[2];break;case 5:s=(i=[w,v,b])[0],u=i[1],l=i[2]}}return[s,u,l,o.length>3?o[3]:1]},Y=c.unpack,Q=c.type;h.prototype.hcg=function(){return K(this._rgb)},g.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["hcg"])))},s.format.hcg=$,s.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Y(e,"hcg"),"array"===Q(e)&&3===e.length)return"hcg"}});var ee=c.unpack,te=c.last,ne=Math.round,re=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ee(e,"rgba"),r=n[0],a=n[1],i=n[2],o=n[3],c=te(e)||"auto";void 0===o&&(o=1),"auto"===c&&(c=o<1?"rgba":"rgb");var s=(r=ne(r))<<16|(a=ne(a))<<8|(i=ne(i)),u="000000"+s.toString(16);u=u.substr(u.length-6);var l="0"+ne(255*o).toString(16);switch(l=l.substr(l.length-2),c.toLowerCase()){case"rgba":return"#"+u+l;case"argb":return"#"+l+u;default:return"#"+u}},ae=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,ie=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,oe=function(e){if(e.match(ae)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}if(e.match(ie)){5!==e.length&&9!==e.length||(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var n=parseInt(e,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+e)},ce=c.type;h.prototype.hex=function(e){return re(this._rgb,e)},g.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["hex"])))},s.format.hex=oe,s.autodetect.push({p:4,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===ce(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var se=c.unpack,ue=c.TWOPI,le=Math.min,fe=Math.sqrt,de=Math.acos,he=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r=se(e,"rgb"),a=r[0],i=r[1],o=r[2],c=le(a/=255,i/=255,o/=255),s=(a+i+o)/3,u=s>0?1-c/s:0;return 0===u?n=NaN:(n=(a-i+(a-o))/2,n/=fe((a-i)*(a-i)+(a-o)*(i-o)),n=de(n),o>i&&(n=ue-n),n/=ue),[360*n,u,s]},pe=c.unpack,ge=c.limit,me=c.TWOPI,ve=c.PITHIRD,be=Math.cos,ye=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,a,i=(e=pe(e,"hsi"))[0],o=e[1],c=e[2];return isNaN(i)&&(i=0),isNaN(o)&&(o=0),i>360&&(i-=360),i<0&&(i+=360),(i/=360)<1/3?r=1-((a=(1-o)/3)+(n=(1+o*be(me*i)/be(ve-me*i))/3)):i<2/3?a=1-((n=(1-o)/3)+(r=(1+o*be(me*(i-=1/3))/be(ve-me*i))/3)):n=1-((r=(1-o)/3)+(a=(1+o*be(me*(i-=2/3))/be(ve-me*i))/3)),[255*(n=ge(c*n*3)),255*(r=ge(c*r*3)),255*(a=ge(c*a*3)),e.length>3?e[3]:1]},we=c.unpack,Se=c.type;h.prototype.hsi=function(){return he(this._rgb)},g.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["hsi"])))},s.format.hsi=ye,s.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=we(e,"hsi"),"array"===Se(e)&&3===e.length)return"hsi"}});var _e=c.unpack,Ne=c.type;h.prototype.hsl=function(){return E(this._rgb)},g.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["hsl"])))},s.format.hsl=B,s.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=_e(e,"hsl"),"array"===Ne(e)&&3===e.length)return"hsl"}});var Me=c.unpack,ke=Math.min,Ce=Math.max,xe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,a,i=(e=Me(e,"rgb"))[0],o=e[1],c=e[2],s=ke(i,o,c),u=Ce(i,o,c),l=u-s;return a=u/255,0===u?(n=Number.NaN,r=0):(r=l/u,i===u&&(n=(o-c)/l),o===u&&(n=2+(c-i)/l),c===u&&(n=4+(i-o)/l),(n*=60)<0&&(n+=360)),[n,r,a]},Ee=c.unpack,Re=Math.floor,We=function(){for(var e,t,n,r,a,i,o=[],c=arguments.length;c--;)o[c]=arguments[c];var s,u,l,f=(o=Ee(o,"hsv"))[0],d=o[1],h=o[2];if(h*=255,0===d)s=u=l=h;else{360===f&&(f=0),f>360&&(f-=360),f<0&&(f+=360);var p=Re(f/=60),g=f-p,m=h*(1-d),v=h*(1-d*g),b=h*(1-d*(1-g));switch(p){case 0:s=(e=[h,b,m])[0],u=e[1],l=e[2];break;case 1:s=(t=[v,h,m])[0],u=t[1],l=t[2];break;case 2:s=(n=[m,h,b])[0],u=n[1],l=n[2];break;case 3:s=(r=[m,v,h])[0],u=r[1],l=r[2];break;case 4:s=(a=[b,m,h])[0],u=a[1],l=a[2];break;case 5:s=(i=[h,m,v])[0],u=i[1],l=i[2]}}return[s,u,l,o.length>3?o[3]:1]},Fe=c.unpack,Ae=c.type;h.prototype.hsv=function(){return xe(this._rgb)},g.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["hsv"])))},s.format.hsv=We,s.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Fe(e,"hsv"),"array"===Ae(e)&&3===e.length)return"hsv"}});var Pe=18,Te=.95047,Be=1,Oe=1.08883,Le=.137931034,De=.206896552,Ie=.12841855,Ue=.008856452,ze=c.unpack,Ve=Math.pow,je=function(e){return(e/=255)<=.04045?e/12.92:Ve((e+.055)/1.055,2.4)},Ge=function(e){return e>Ue?Ve(e,1/3):e/Ie+Le},Je=function(e,t,n){return e=je(e),t=je(t),n=je(n),[Ge((.4124564*e+.3575761*t+.1804375*n)/Te),Ge((.2126729*e+.7151522*t+.072175*n)/Be),Ge((.0193339*e+.119192*t+.9503041*n)/Oe)]},He=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ze(e,"rgb"),r=n[0],a=n[1],i=n[2],o=Je(r,a,i),c=o[0],s=o[1],u=o[2],l=116*s-16;return[l<0?0:l,500*(c-s),200*(s-u)]},qe=c.unpack,Ke=Math.pow,Xe=function(e){return 255*(e<=.00304?12.92*e:1.055*Ke(e,1/2.4)-.055)},Ze=function(e){return e>De?e*e*e:Ie*(e-Le)},$e=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n,r,a,i=(e=qe(e,"lab"))[0],o=e[1],c=e[2];return r=(i+16)/116,n=isNaN(o)?r:r+o/500,a=isNaN(c)?r:r-c/200,r=Be*Ze(r),n=Te*Ze(n),a=Oe*Ze(a),[Xe(3.2404542*n-1.5371385*r-.4985314*a),Xe(-.969266*n+1.8760108*r+.041556*a),Xe(.0556434*n-.2040259*r+1.0572252*a),e.length>3?e[3]:1]},Ye=c.unpack,Qe=c.type;h.prototype.lab=function(){return He(this._rgb)},g.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["lab"])))},s.format.lab=$e,s.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ye(e,"lab"),"array"===Qe(e)&&3===e.length)return"lab"}});var et=c.unpack,tt=c.RAD2DEG,nt=Math.sqrt,rt=Math.atan2,at=Math.round,it=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=et(e,"lab"),r=n[0],a=n[1],i=n[2],o=nt(a*a+i*i),c=(rt(i,a)*tt+360)%360;return 0===at(1e4*o)&&(c=Number.NaN),[r,o,c]},ot=c.unpack,ct=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=ot(e,"rgb"),r=n[0],a=n[1],i=n[2],o=He(r,a,i),c=o[0],s=o[1],u=o[2];return it(c,s,u)},st=c.unpack,ut=c.DEG2RAD,lt=Math.sin,ft=Math.cos,dt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=st(e,"lch"),r=n[0],a=n[1],i=n[2];return isNaN(i)&&(i=0),[r,ft(i*=ut)*a,lt(i)*a]},ht=c.unpack,pt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=(e=ht(e,"lch"))[0],r=e[1],a=e[2],i=dt(n,r,a),o=i[0],c=i[1],s=i[2],u=$e(o,c,s),l=u[0],f=u[1],d=u[2];return[l,f,d,e.length>3?e[3]:1]},gt=c.unpack,mt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=gt(e,"hcl").reverse();return pt.apply(void 0,n)},vt=c.unpack,bt=c.type;h.prototype.lch=function(){return ct(this._rgb)},h.prototype.hcl=function(){return ct(this._rgb).reverse()},g.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["lch"])))},g.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["hcl"])))},s.format.lch=pt,s.format.hcl=mt,["lch","hcl"].forEach((function(e){return s.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=vt(t,e),"array"===bt(t)&&3===t.length)return e}})}));var yt={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},wt=c.type;h.prototype.name=function(){for(var e=re(this._rgb,"rgb"),t=0,n=Object.keys(yt);t<n.length;t+=1){var r=n[t];if(yt[r]===e)return r.toLowerCase()}return e},s.format.named=function(e){if(e=e.toLowerCase(),yt[e])return oe(yt[e]);throw new Error("unknown color name: "+e)},s.autodetect.push({p:5,test:function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];if(!t.length&&"string"===wt(e)&&yt[e.toLowerCase()])return"named"}});var St=c.unpack,_t=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=St(e,"rgb"),r=n[0],a=n[1],i=n[2];return(r<<16)+(a<<8)+i},Nt=c.type,Mt=function(e){if("number"==Nt(e)&&e>=0&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw new Error("unknown num color: "+e)},kt=c.type;h.prototype.num=function(){return _t(this._rgb)},g.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["num"])))},s.format.num=Mt,s.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===kt(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});var Ct=c.unpack,xt=c.type,Et=Math.round;h.prototype.rgb=function(e){return void 0===e&&(e=!0),!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Et)},h.prototype.rgba=function(e){return void 0===e&&(e=!0),this._rgb.slice(0,4).map((function(t,n){return n<3?!1===e?t:Et(t):t}))},g.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["rgb"])))},s.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=Ct(e,"rgba");return void 0===n[3]&&(n[3]=1),n},s.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(e=Ct(e,"rgba"),"array"===xt(e)&&(3===e.length||4===e.length&&"number"==xt(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});var Rt=Math.log,Wt=function(e){var t,n,r,a=e/100;return a<66?(t=255,n=-155.25485562709179-.44596950469579133*(n=a-2)+104.49216199393888*Rt(n),r=a<20?0:.8274096064007395*(r=a-10)-254.76935184120902+115.67994401066147*Rt(r)):(t=351.97690566805693+.114206453784165*(t=a-55)-40.25366309332127*Rt(t),n=325.4494125711974+.07943456536662342*(n=a-50)-28.0852963507957*Rt(n),r=255),[t,n,r,1]},Ft=c.unpack,At=Math.round,Pt=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var n,r=Ft(e,"rgb"),a=r[0],i=r[2],o=1e3,c=4e4,s=.4;c-o>s;){var u=Wt(n=.5*(c+o));u[2]/u[0]>=i/a?c=n:o=n}return At(n)};h.prototype.temp=h.prototype.kelvin=h.prototype.temperature=function(){return Pt(this._rgb)},g.temp=g.kelvin=g.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(h,[null].concat(e,["temp"])))},s.format.temp=s.format.kelvin=s.format.temperature=Wt;var Tt=c.type;h.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===Tt(e)?t?(this._rgb[3]=e,this):new h([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},h.prototype.clipped=function(){return this._rgb._clipped||!1},h.prototype.darken=function(e){void 0===e&&(e=1);var t=this.lab();return t[0]-=Pe*e,new h(t,"lab").alpha(this.alpha(),!0)},h.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},h.prototype.darker=h.prototype.darken,h.prototype.brighter=h.prototype.brighten,h.prototype.get=function(e){var t=e.split("."),n=t[0],r=t[1],a=this[n]();if(r){var i=n.indexOf(r);if(i>-1)return a[i];throw new Error("unknown channel "+r+" in mode "+n)}return a};var Bt=c.type,Ot=Math.pow;h.prototype.luminance=function(e){if(void 0!==e&&"number"===Bt(e)){if(0===e)return new h([0,0,0,this._rgb[3]],"rgb");if(1===e)return new h([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),n=20,r=function(t,a){var i=t.interpolate(a,.5,"rgb"),o=i.luminance();return Math.abs(e-o)<1e-7||!n--?i:o>e?r(t,i):r(i,a)},a=(t>e?r(new h([0,0,0]),this):r(this,new h([255,255,255]))).rgb();return new h(a.concat([this._rgb[3]]))}return Lt.apply(void 0,this._rgb.slice(0,3))};var Lt=function(e,t,n){return.2126*(e=Dt(e))+.7152*(t=Dt(t))+.0722*(n=Dt(n))},Dt=function(e){return(e/=255)<=.03928?e/12.92:Ot((e+.055)/1.055,2.4)},It={},Ut=c.type,zt=function(e,t,n){void 0===n&&(n=.5);for(var r=[],a=arguments.length-3;a-- >0;)r[a]=arguments[a+3];var i=r[0]||"lrgb";if(It[i]||r.length||(i=Object.keys(It)[0]),!It[i])throw new Error("interpolation mode "+i+" is not defined");return"object"!==Ut(e)&&(e=new h(e)),"object"!==Ut(t)&&(t=new h(t)),It[i](e,t,n).alpha(e.alpha()+n*(t.alpha()-e.alpha()))};h.prototype.mix=h.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return zt.apply(void 0,[this,e,t].concat(n))},h.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,n=t[3];return e?(this._rgb=[t[0]*n,t[1]*n,t[2]*n,n],this):new h([t[0]*n,t[1]*n,t[2]*n,n],"rgb")},h.prototype.saturate=function(e){void 0===e&&(e=1);var t=this.lch();return t[1]+=Pe*e,t[1]<0&&(t[1]=0),new h(t,"lch").alpha(this.alpha(),!0)},h.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)};var Vt=c.type;h.prototype.set=function(e,t,n){void 0===n&&(n=!1);var r=e.split("."),a=r[0],i=r[1],o=this[a]();if(i){var c=a.indexOf(i);if(c>-1){if("string"==Vt(t))switch(t.charAt(0)){case"+":case"-":o[c]+=+t;break;case"*":o[c]*=+t.substr(1);break;case"/":o[c]/=+t.substr(1);break;default:o[c]=+t}else{if("number"!==Vt(t))throw new Error("unsupported value for Color.set");o[c]=t}var s=new h(o,a);return n?(this._rgb=s._rgb,this):s}throw new Error("unknown channel "+i+" in mode "+a)}return o},It.rgb=function(e,t,n){var r=e._rgb,a=t._rgb;return new h(r[0]+n*(a[0]-r[0]),r[1]+n*(a[1]-r[1]),r[2]+n*(a[2]-r[2]),"rgb")};var jt=Math.sqrt,Gt=Math.pow;It.lrgb=function(e,t,n){var r=e._rgb,a=r[0],i=r[1],o=r[2],c=t._rgb,s=c[0],u=c[1],l=c[2];return new h(jt(Gt(a,2)*(1-n)+Gt(s,2)*n),jt(Gt(i,2)*(1-n)+Gt(u,2)*n),jt(Gt(o,2)*(1-n)+Gt(l,2)*n),"rgb")},It.lab=function(e,t,n){var r=e.lab(),a=t.lab();return new h(r[0]+n*(a[0]-r[0]),r[1]+n*(a[1]-r[1]),r[2]+n*(a[2]-r[2]),"lab")};var Jt=function(e,t,n,r){var a,i,o,c,s,u,l,f,d,p,g,m;return"hsl"===r?(o=e.hsl(),c=t.hsl()):"hsv"===r?(o=e.hsv(),c=t.hsv()):"hcg"===r?(o=e.hcg(),c=t.hcg()):"hsi"===r?(o=e.hsi(),c=t.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",o=e.hcl(),c=t.hcl()),"h"===r.substr(0,1)&&(s=(a=o)[0],l=a[1],d=a[2],u=(i=c)[0],f=i[1],p=i[2]),isNaN(s)||isNaN(u)?isNaN(s)?isNaN(u)?m=Number.NaN:(m=u,1!=d&&0!=d||"hsv"==r||(g=f)):(m=s,1!=p&&0!=p||"hsv"==r||(g=l)):m=s+n*(u>s&&u-s>180?u-(s+360):u<s&&s-u>180?u+360-s:u-s),void 0===g&&(g=l+n*(f-l)),new h([m,g,d+n*(p-d)],r)},Ht=function(e,t,n){return Jt(e,t,n,"lch")};It.lch=Ht,It.hcl=Ht,It.num=function(e,t,n){var r=e.num(),a=t.num();return new h(r+n*(a-r),"num")},It.hcg=function(e,t,n){return Jt(e,t,n,"hcg")},It.hsi=function(e,t,n){return Jt(e,t,n,"hsi")},It.hsl=function(e,t,n){return Jt(e,t,n,"hsl")},It.hsv=function(e,t,n){return Jt(e,t,n,"hsv")};var qt=c.clip_rgb,Kt=Math.pow,Xt=Math.sqrt,Zt=Math.PI,$t=Math.cos,Yt=Math.sin,Qt=Math.atan2,en=function(e,t){for(var n=e.length,r=[0,0,0,0],a=0;a<e.length;a++){var i=e[a],o=t[a]/n,c=i._rgb;r[0]+=Kt(c[0],2)*o,r[1]+=Kt(c[1],2)*o,r[2]+=Kt(c[2],2)*o,r[3]+=c[3]*o}return r[0]=Xt(r[0]),r[1]=Xt(r[1]),r[2]=Xt(r[2]),r[3]>.9999999&&(r[3]=1),new h(qt(r))},tn=c.type,nn=Math.pow,rn=function(e){var t="rgb",n=g("#ccc"),r=0,a=[0,1],i=[],o=[0,0],c=!1,s=[],u=!1,l=0,f=1,d=!1,h={},p=!0,m=1,v=function(e){if((e=e||["#fff","#000"])&&"string"===tn(e)&&g.brewer&&g.brewer[e.toLowerCase()]&&(e=g.brewer[e.toLowerCase()]),"array"===tn(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(var t=0;t<e.length;t++)e[t]=g(e[t]);i.length=0;for(var n=0;n<e.length;n++)i.push(n/(e.length-1))}return S(),s=e},b=function(e){return e},y=function(e){return e},w=function(e,r){var a,u;if(null==r&&(r=!1),isNaN(e)||null===e)return n;u=r?e:c&&c.length>2?function(e){if(null!=c){for(var t=c.length-1,n=0;n<t&&e>=c[n];)n++;return n-1}return 0}(e)/(c.length-2):f!==l?(e-l)/(f-l):1,u=y(u),r||(u=b(u)),1!==m&&(u=nn(u,m)),u=o[0]+u*(1-o[0]-o[1]),u=Math.min(1,Math.max(0,u));var d=Math.floor(1e4*u);if(p&&h[d])a=h[d];else{if("array"===tn(s))for(var v=0;v<i.length;v++){var w=i[v];if(u<=w){a=s[v];break}if(u>=w&&v===i.length-1){a=s[v];break}if(u>w&&u<i[v+1]){u=(u-w)/(i[v+1]-w),a=g.interpolate(s[v],s[v+1],u,t);break}}else"function"===tn(s)&&(a=s(u));p&&(h[d]=a)}return a},S=function(){return h={}};v(e);var _=function(e){var t=g(w(e));return u&&t[u]?t[u]():t};return _.classes=function(e){if(null!=e){if("array"===tn(e))c=e,a=[e[0],e[e.length-1]];else{var t=g.analyze(a);c=0===e?[t.min,t.max]:g.limits(t,"e",e)}return _}return c},_.domain=function(e){if(!arguments.length)return a;l=e[0],f=e[e.length-1],i=[];var t=s.length;if(e.length===t&&l!==f)for(var n=0,r=Array.from(e);n<r.length;n+=1){var o=r[n];i.push((o-l)/(f-l))}else{for(var c=0;c<t;c++)i.push(c/(t-1));if(e.length>2){var u=e.map((function(t,n){return n/(e.length-1)})),d=e.map((function(e){return(e-l)/(f-l)}));d.every((function(e,t){return u[t]===e}))||(y=function(e){if(e<=0||e>=1)return e;for(var t=0;e>=d[t+1];)t++;var n=(e-d[t])/(d[t+1]-d[t]);return u[t]+n*(u[t+1]-u[t])})}}return a=[l,f],_},_.mode=function(e){return arguments.length?(t=e,S(),_):t},_.range=function(e,t){return v(e),_},_.out=function(e){return u=e,_},_.spread=function(e){return arguments.length?(r=e,_):r},_.correctLightness=function(e){return null==e&&(e=!0),d=e,S(),b=d?function(e){for(var t=w(0,!0).lab()[0],n=w(1,!0).lab()[0],r=t>n,a=w(e,!0).lab()[0],i=t+(n-t)*e,o=a-i,c=0,s=1,u=20;Math.abs(o)>.01&&u-- >0;)r&&(o*=-1),o<0?(c=e,e+=.5*(s-e)):(s=e,e+=.5*(c-e)),a=w(e,!0).lab()[0],o=a-i;return e}:function(e){return e},_},_.padding=function(e){return null!=e?("number"===tn(e)&&(e=[e,e]),o=e,_):o},_.colors=function(t,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=s.slice(0);else if(1===t)r=[_(.5)];else if(t>1){var i=a[0],o=a[1]-i;r=an(0,t,!1).map((function(e){return _(i+e/(t-1)*o)}))}else{e=[];var u=[];if(c&&c.length>2)for(var l=1,f=c.length,d=1<=f;d?l<f:l>f;d?l++:l--)u.push(.5*(c[l-1]+c[l]));else u=a;r=u.map((function(e){return _(e)}))}return g[n]&&(r=r.map((function(e){return e[n]()}))),r},_.cache=function(e){return null!=e?(p=e,_):p},_.gamma=function(e){return null!=e?(m=e,_):m},_.nodata=function(e){return null!=e?(n=g(e),_):n},_};function an(e,t,n){for(var r=[],a=e<t,i=n?a?t+1:t-1:t,o=e;a?o<i:o>i;a?o++:o--)r.push(o);return r}var on=function(e){var t,n,r,a,i,o,c;if(2===(e=e.map((function(e){return new h(e)}))).length)t=e.map((function(e){return e.lab()})),i=t[0],o=t[1],a=function(e){var t=[0,1,2].map((function(t){return i[t]+e*(o[t]-i[t])}));return new h(t,"lab")};else if(3===e.length)n=e.map((function(e){return e.lab()})),i=n[0],o=n[1],c=n[2],a=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*i[t]+2*(1-e)*e*o[t]+e*e*c[t]}));return new h(t,"lab")};else if(4===e.length){var s;r=e.map((function(e){return e.lab()})),i=r[0],o=r[1],c=r[2],s=r[3],a=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*(1-e)*i[t]+3*(1-e)*(1-e)*e*o[t]+3*(1-e)*e*e*c[t]+e*e*e*s[t]}));return new h(t,"lab")}}else if(5===e.length){var u=on(e.slice(0,3)),l=on(e.slice(2,5));a=function(e){return e<.5?u(2*e):l(2*(e-.5))}}return a},cn=function(e,t,n){if(!cn[n])throw new Error("unknown blend mode "+n);return cn[n](e,t)},sn=function(e){return function(t,n){var r=g(n).rgb(),a=g(t).rgb();return g.rgb(e(r,a))}},un=function(e){return function(t,n){var r=[];return r[0]=e(t[0],n[0]),r[1]=e(t[1],n[1]),r[2]=e(t[2],n[2]),r}};cn.normal=sn(un((function(e){return e}))),cn.multiply=sn(un((function(e,t){return e*t/255}))),cn.screen=sn(un((function(e,t){return 255*(1-(1-e/255)*(1-t/255))}))),cn.overlay=sn(un((function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))}))),cn.darken=sn(un((function(e,t){return e>t?t:e}))),cn.lighten=sn(un((function(e,t){return e>t?e:t}))),cn.dodge=sn(un((function(e,t){return 255===e?255:(e=t/255*255/(1-e/255))>255?255:e}))),cn.burn=sn(un((function(e,t){return 255*(1-(1-t/255)/(e/255))})));for(var ln=cn,fn=c.type,dn=c.clip_rgb,hn=c.TWOPI,pn=Math.pow,gn=Math.sin,mn=Math.cos,vn=Math.floor,bn=Math.random,yn=Math.log,wn=Math.pow,Sn=Math.floor,_n=Math.abs,Nn=function(e,t){void 0===t&&(t=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===i(e)&&(e=Object.values(e)),e.forEach((function(e){t&&"object"===i(e)&&(e=e[t]),null==e||isNaN(e)||(n.values.push(e),n.sum+=e,e<n.min&&(n.min=e),e>n.max&&(n.max=e),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(e,t){return Mn(n,e,t)},n},Mn=function(e,t,n){void 0===t&&(t="equal"),void 0===n&&(n=7),"array"==i(e)&&(e=Nn(e));var r=e.min,a=e.max,o=e.values.sort((function(e,t){return e-t}));if(1===n)return[r,a];var c=[];if("c"===t.substr(0,1)&&(c.push(r),c.push(a)),"e"===t.substr(0,1)){c.push(r);for(var s=1;s<n;s++)c.push(r+s/n*(a-r));c.push(a)}else if("l"===t.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var u=Math.LOG10E*yn(r),l=Math.LOG10E*yn(a);c.push(r);for(var f=1;f<n;f++)c.push(wn(10,u+f/n*(l-u)));c.push(a)}else if("q"===t.substr(0,1)){c.push(r);for(var d=1;d<n;d++){var h=(o.length-1)*d/n,p=Sn(h);if(p===h)c.push(o[p]);else{var g=h-p;c.push(o[p]*(1-g)+o[p+1]*g)}}c.push(a)}else if("k"===t.substr(0,1)){var m,v=o.length,b=new Array(v),y=new Array(n),w=!0,S=0,_=null;(_=[]).push(r);for(var N=1;N<n;N++)_.push(r+N/n*(a-r));for(_.push(a);w;){for(var M=0;M<n;M++)y[M]=0;for(var k=0;k<v;k++)for(var C=o[k],x=Number.MAX_VALUE,E=void 0,R=0;R<n;R++){var W=_n(_[R]-C);W<x&&(x=W,E=R),y[E]++,b[k]=E}for(var F=new Array(n),A=0;A<n;A++)F[A]=null;for(var P=0;P<v;P++)null===F[m=b[P]]?F[m]=o[P]:F[m]+=o[P];for(var T=0;T<n;T++)F[T]*=1/y[T];w=!1;for(var B=0;B<n;B++)if(F[B]!==_[B]){w=!0;break}_=F,++S>200&&(w=!1)}for(var O={},L=0;L<n;L++)O[L]=[];for(var D=0;D<v;D++)O[m=b[D]].push(o[D]);for(var I=[],U=0;U<n;U++)I.push(O[U][0]),I.push(O[U][O[U].length-1]);I=I.sort((function(e,t){return e-t})),c.push(I[0]);for(var z=1;z<I.length;z+=2){var V=I[z];isNaN(V)||-1!==c.indexOf(V)||c.push(V)}}return c},kn={analyze:Nn,limits:Mn},Cn=Math.sqrt,xn=Math.atan2,En=Math.abs,Rn=Math.cos,Wn=Math.PI,Fn={cool:function(){return rn([g.hsl(180,1,.9),g.hsl(250,.7,.4)])},hot:function(){return rn(["#000","#f00","#ff0","#fff"]).mode("rgb")}},An={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Pn=0,Tn=Object.keys(An);Pn<Tn.length;Pn+=1){var Bn=Tn[Pn];An[Bn.toLowerCase()]=An[Bn]}var On=An;return g.average=function(e,t,n){void 0===t&&(t="lrgb"),void 0===n&&(n=null);var r=e.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var a=r/n.reduce((function(e,t){return e+t}));if(n.forEach((function(e,t){n[t]*=a})),e=e.map((function(e){return new h(e)})),"lrgb"===t)return en(e,n);for(var i=e.shift(),o=i.get(t),c=[],s=0,u=0,l=0;l<o.length;l++)if(o[l]=(o[l]||0)*n[0],c.push(isNaN(o[l])?0:n[0]),"h"===t.charAt(l)&&!isNaN(o[l])){var f=o[l]/180*Zt;s+=$t(f)*n[0],u+=Yt(f)*n[0]}var d=i.alpha()*n[0];e.forEach((function(e,r){var a=e.get(t);d+=e.alpha()*n[r+1];for(var i=0;i<o.length;i++)if(!isNaN(a[i]))if(c[i]+=n[r+1],"h"===t.charAt(i)){var l=a[i]/180*Zt;s+=$t(l)*n[r+1],u+=Yt(l)*n[r+1]}else o[i]+=a[i]*n[r+1]}));for(var p=0;p<o.length;p++)if("h"===t.charAt(p)){for(var g=Qt(u/c[p],s/c[p])/Zt*180;g<0;)g+=360;for(;g>=360;)g-=360;o[p]=g}else o[p]=o[p]/c[p];return d/=r,new h(o,t).alpha(d>.99999?1:d,!0)},g.bezier=function(e){var t=on(e);return t.scale=function(){return rn(t)},t},g.blend=ln,g.cubehelix=function(e,t,n,r,a){void 0===e&&(e=300),void 0===t&&(t=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=[0,1]);var i,o=0;"array"===fn(a)?i=a[1]-a[0]:(i=0,a=[a,a]);var c=function(c){var s=hn*((e+120)/360+t*c),u=pn(a[0]+i*c,r),l=(0!==o?n[0]+c*o:n)*u*(1-u)/2,f=mn(s),d=gn(s);return g(dn([255*(u+l*(-.14861*f+1.78277*d)),255*(u+l*(-.29227*f-.90649*d)),255*(u+l*(1.97294*f)),1]))};return c.start=function(t){return null==t?e:(e=t,c)},c.rotations=function(e){return null==e?t:(t=e,c)},c.gamma=function(e){return null==e?r:(r=e,c)},c.hue=function(e){return null==e?n:("array"===fn(n=e)?0==(o=n[1]-n[0])&&(n=n[1]):o=0,c)},c.lightness=function(e){return null==e?a:("array"===fn(e)?(a=e,i=e[1]-e[0]):(a=[e,e],i=0),c)},c.scale=function(){return g.scale(c)},c.hue(n),c},g.mix=g.interpolate=zt,g.random=function(){for(var e="#",t=0;t<6;t++)e+="0123456789abcdef".charAt(vn(16*bn()));return new h(e,"hex")},g.scale=rn,g.analyze=kn.analyze,g.contrast=function(e,t){e=new h(e),t=new h(t);var n=e.luminance(),r=t.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},g.deltaE=function(e,t,n,r){void 0===n&&(n=1),void 0===r&&(r=1),e=new h(e),t=new h(t);for(var a=Array.from(e.lab()),i=a[0],o=a[1],c=a[2],s=Array.from(t.lab()),u=s[0],l=s[1],f=s[2],d=Cn(o*o+c*c),p=Cn(l*l+f*f),g=i<16?.511:.040975*i/(1+.01765*i),m=.0638*d/(1+.0131*d)+.638,v=d<1e-6?0:180*xn(c,o)/Wn;v<0;)v+=360;for(;v>=360;)v-=360;var b=v>=164&&v<=345?.56+En(.2*Rn(Wn*(v+168)/180)):.36+En(.4*Rn(Wn*(v+35)/180)),y=d*d*d*d,w=Cn(y/(y+1900)),S=m*(w*b+1-w),_=d-p,N=o-l,M=c-f,k=(i-u)/(n*g),C=_/(r*m);return Cn(k*k+C*C+(N*N+M*M-_*_)/(S*S))},g.distance=function(e,t,n){void 0===n&&(n="lab"),e=new h(e),t=new h(t);var r=e.get(n),a=t.get(n),i=0;for(var o in r){var c=(r[o]||0)-(a[o]||0);i+=c*c}return Math.sqrt(i)},g.limits=kn.limits,g.valid=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(h,[null].concat(e))),!0}catch(n){return!1}},g.scales=Fn,g.colors=yt,g.brewer=On,g}()},function(e,t){e.exports=function(e,t,n){function r(n){e.isVisible()&&(n?(NSApplication.sharedApplication().activateIgnoringOtherApps(!0),t.makeKeyAndOrderFront(null)):(t.orderBack(null),NSApp.mainWindow().makeKeyAndOrderFront(null)))}e._panel=t,e._webview=n,e._destroyed=!1,e.destroy=function(){return t.close()},e.close=function(){if(t.delegate().utils&&t.delegate().utils.parentWindow){var n=!0;return e.emit("close",{get defaultPrevented(){return!n},preventDefault:function(){n=!1}}),void(n&&t.delegate().utils.parentWindow.endSheet(t))}e.isClosable()&&t.performClose(null)},e.focus=r.bind(this,!0),e.blur=r.bind(this,!1),e.isFocused=function(){return t.isKeyWindow()},e.isDestroyed=function(){return e._destroyed},e.show=function(){return NSApp.activateIgnoringOtherApps(!0),t.delegate().utils&&t.delegate().utils.parentWindow?t.delegate().utils.parentWindow.beginSheet_completionHandler(t,__mocha__.createBlock_function("v16@?0q8",(function(){e.emit("closed")}))):t.makeKeyAndOrderFront(null)},e.showInactive=function(){return t.orderFrontRegardless()},e.hide=function(){return t.orderOut(null)},e.isVisible=function(){return t.isVisible()},e.isModal=function(){return!1},e.maximize=function(){e.isMaximized()||t.zoom(null)},e.unmaximize=function(){e.isMaximized()&&t.zoom(null)},e.isMaximized=function(){if(0!=(t.styleMask()&NSResizableWindowMask))return t.isZoomed();var e=NSScreen.mainScreen().visibleFrame(),n=t.frame();return e.origin.x==n.origin.x&&e.origin.y==n.origin.y&&e.size.width==n.size.width&&e.size.height==n.size.height},e.minimize=function(){return t.miniaturize(null)},e.restore=function(){return t.deminiaturize(null)},e.isMinimized=function(){return t.isMiniaturized()},e.setFullScreen=function(n){n!==e.isFullscreen()&&t.toggleFullScreen(null)},e.isFullscreen=function(){return t.styleMask()&NSFullScreenWindowMask},e.setAspectRatio=function(e){e>0?t.setAspectRatio(NSMakeSize(e,1)):t.setResizeIncrements(NSMakeSize(1,1))},e.setBounds=function(n,r){if(!n)return;if(e.isFullscreen())return;const a=Object.assign(e.getBounds(),n);var i=NSMakeRect(a.x,0,a.width,a.height),o=NSScreen.screens().firstObject();i.origin.y=NSHeight(o.frame())-a.y,t.setFrame_display_animate(i,!0,r)},e.getBounds=function(){const e=t.frame();var n=NSScreen.screens().firstObject().frame();return{x:e.origin.x,y:Math.round(NSHeight(n)-e.origin.y),width:e.size.width,height:e.size.height}},e.setContentBounds=function(t,n){e.setBounds(t,n)},e.getContentBounds=function(){return e.getBounds()},e.setSize=function(t,n,r){return e.setBounds({width:t,height:n},r)},e.getSize=function(){var t=e.getBounds();return[t.width,t.height]},e.setContentSize=function(t,n,r){return e.setContentBounds({width:t,height:n},r)},e.getContentSize=function(){var t=e.getContentBounds();return[t.width,t.height]},e.setMinimumSize=function(e,n){const r=CGSizeMake(e,n);t.setContentMinSize(r)},e.getMinimumSize=function(){const e=t.contentMinSize();return[e.width,e.height]},e.setMaximumSize=function(e,n){const r=CGSizeMake(e,n);t.setContentMaxSize(r)},e.getMaximumSize=function(){const e=t.contentMaxSize();return[e.width,e.height]},e.setResizable=function(t){return e._setStyleMask(t,NSResizableWindowMask)},e.isResizable=function(){return t.styleMask()&NSResizableWindowMask},e.setMovable=function(e){return t.setMovable(e)},e.isMovable=function(){return t.isMovable()},e.setMinimizable=function(t){return e._setStyleMask(t,NSMiniaturizableWindowMask)},e.isMinimizable=function(){return t.styleMask()&NSMiniaturizableWindowMask},e.setMaximizable=function(e){t.standardWindowButton(NSWindowZoomButton)&&t.standardWindowButton(NSWindowZoomButton).setEnabled(e)},e.isMaximizable=function(){return t.standardWindowButton(NSWindowZoomButton)&&t.standardWindowButton(NSWindowZoomButton).isEnabled()},e.setFullScreenable=function(t){e._setCollectionBehavior(t,NSWindowCollectionBehaviorFullScreenPrimary),e._setCollectionBehavior(!t,NSWindowCollectionBehaviorFullScreenAuxiliary)},e.isFullScreenable=function(){return t.collectionBehavior()&NSWindowCollectionBehaviorFullScreenPrimary},e.setClosable=function(t){e._setStyleMask(t,NSClosableWindowMask)},e.isClosable=function(){return t.styleMask()&NSClosableWindowMask},e.setAlwaysOnTop=function(e,n,r){var a=NSNormalWindowLevel,i=CGWindowLevelForKey(kCGMaximumWindowLevelKey),o=CGWindowLevelForKey(kCGMinimumWindowLevelKey);e&&(a="normal"===n?NSNormalWindowLevel:"torn-off-menu"===n?NSTornOffMenuWindowLevel:"modal-panel"===n?NSModalPanelWindowLevel:"main-menu"===n?NSMainMenuWindowLevel:"status"===n?NSStatusWindowLevel:"pop-up-menu"===n?NSPopUpMenuWindowLevel:"screen-saver"===n?NSScreenSaverWindowLevel:"dock"===n?NSDockWindowLevel:NSFloatingWindowLevel);var c=a+(r||0);if(!(c>=o&&c<=i))throw new Error("relativeLevel must be between "+o+" and "+i);t.setLevel(c)},e.isAlwaysOnTop=function(){return t.level()!==NSNormalWindowLevel},e.moveTop=function(){return t.orderFrontRegardless()},e.center=function(){t.center()},e.setPosition=function(t,n,r){return e.setBounds({x:t,y:n},r)},e.getPosition=function(){var t=e.getBounds();return[t.x,t.y]},e.setTitle=function(e){t.setTitle(e)},e.getTitle=function(){return String(t.title())};var a=0;e.flashFrame=function(e){e?a=NSApp.requestUserAttention(NSInformationalRequest):(NSApp.cancelUserAttentionRequest(a),a=0)},e.getNativeWindowHandle=function(){return t},e.getNativeWebViewHandle=function(){return n},e.loadURL=function(e){if(/^(?!https?|file).*\.html?$/.test(e)&&"undefined"!=typeof __command&&__command.pluginBundle()&&(e="file://"+__command.pluginBundle().urlForResourceNamed(e).path()),/^file:\/\/.*\.html?$/.test(e))return e=(e=NSString.alloc().initWithString(e)).stringByAddingPercentEncodingWithAllowedCharacters(NSCharacterSet.URLQueryAllowedCharacterSet()),void n.loadFileURL_allowingReadAccessToURL(NSURL.URLWithString(e),NSURL.URLWithString("file:///"));const t=NSURL.URLWithString(e),r=NSURLRequest.requestWithURL(t);n.loadRequest(r)},e.reload=function(){n.reload()},e.setHasShadow=function(e){return t.setHasShadow(e)},e.hasShadow=function(){return t.hasShadow()},e.setOpacity=function(e){return t.setAlphaValue(e)},e.getOpacity=function(){return t.alphaValue()},e.setVisibleOnAllWorkspaces=function(t){return e._setCollectionBehavior(t,NSWindowCollectionBehaviorCanJoinAllSpaces)},e.isVisibleOnAllWorkspaces=function(){return t.collectionBehavior()&NSWindowCollectionBehaviorCanJoinAllSpaces},e.setIgnoreMouseEvents=function(e){return t.setIgnoresMouseEvents(e)},e.setContentProtection=function(e){t.setSharingType(e?NSWindowSharingNone:NSWindowSharingReadOnly)},e.setAutoHideCursor=function(e){t.setDisableAutoHideCursor(e)},e.setVibrancy=function(n){var r=e._vibrantView;if(!n){if(null==r)return;return r.removeFromSuperview(),void t.setVibrantView(null)}if(null==r){var a=t.contentView();r=NSVisualEffectView.alloc().initWithFrame(a.bounds()),e._vibrantView=r,r.setAutoresizingMask(NSViewWidthSizable|NSViewHeightSizable),r.setBlendingMode(NSVisualEffectBlendingModeBehindWindow),r.setState(NSVisualEffectStateActive),r.setFrame(a.bounds()),a.addSubview_positioned_relativeTo(r,NSWindowBelow,null)}var i=NSVisualEffectMaterialLight;"appearance-based"===n?i=NSVisualEffectMaterialAppearanceBased:"light"===n?i=NSVisualEffectMaterialLight:"dark"===n?i=NSVisualEffectMaterialDark:"titlebar"===n?i=NSVisualEffectMaterialTitlebar:"selection"===n?i=NSVisualEffectMaterialSelection:"menu"===n?i=NSVisualEffectMaterialMenu:"popover"===n?i=NSVisualEffectMaterialPopover:"sidebar"===n?i=NSVisualEffectMaterialSidebar:"medium-light"===n?i=NSVisualEffectMaterialMediumLight:"ultra-dark"===n&&(i=NSVisualEffectMaterialUltraDark),r.setMaterial(i)},e._setBackgroundColor=function(e){var r=function(e){if(!e||"#"!==e[0]){if(e&&"function"==typeof e.isKindOfClass&&e.isKindOfClass(NSColor))return e;throw new Error("Incorrect color formating. It should be an hex color: #RRGGBBAA")}var t,n=e.substr(1);if(3===n.length?n+="F":6===n.length&&(n+="FF"),4===n.length)for(var r=0;r<4;r+=1)t+=n[r],t+=n[r];else{if(8!==n.length)return NSColor.whiteColor();t=n}var a=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16),c=parseInt(t.slice(6,8),16);return NSColor.colorWithSRGBRed_green_blue_alpha(a,i,o,c)}(e);n.setValue_forKey(!1,"drawsBackground"),t.backgroundColor=r},e._invalidate=function(){t.flushWindow(),t.contentView().setNeedsDisplay(!0)},e._setStyleMask=function(n,r){var a=e.isMaximizable();n?t.setStyleMask(t.styleMask()|r):t.setStyleMask(t.styleMask()&~r),e.setMaximizable(a)},e._setCollectionBehavior=function(n,r){var a=e.isMaximizable();n?t.setCollectionBehavior(t.collectionBehavior()|r):t.setCollectionBehavior(t.collectionBehavior()&~r),e.setMaximizable(a)},e._showWindowButton=function(e){var n=t.standardWindowButton(e);n.superview().addSubview_positioned_relative(n,NSWindowAbove,null)}}},function(e,t,n){var r=n(6),a=n(7);e.exports=function(e,t,n){var i=new r;i.loadURL=e.loadURL,i.loadFile=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},i.downloadURL=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},i.getURL=function(){return String(n.url())},i.getTitle=function(){return String(n.title())},i.isDestroyed=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},i.focus=e.focus,i.isFocused=e.isFocused,i.isLoading=function(){return!!n.loading()},i.isLoadingMainFrame=function(){return!!n.loading()},i.isWaitingForResponse=function(){return!n.loading()},i.stop=function(){n.stopLoading()},i.reload=function(){n.reload()},i.reloadIgnoringCache=function(){n.reloadFromOrigin()},i.canGoBack=function(){return!!n.canGoBack()},i.canGoForward=function(){return!!n.canGoForward()},i.canGoToOffset=function(e){return!!n.backForwardList().itemAtIndex(e)},i.clearHistory=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},i.goBack=function(){n.goBack()},i.goForward=function(){n.goForward()},i.goToIndex=function(e){var t=n.backForwardList(),r=t.backList(),a=r.count();if(a>e)n.loadRequest(NSURLRequest.requestWithURL(r[e]));else{var i=t.forwardList();if(!(i.count()>e-a))throw new Error("Cannot go to index "+e);n.loadRequest(NSURLRequest.requestWithURL(i[e-a]))}},i.goToOffset=function(e){if(!i.canGoToOffset(e))throw new Error("Cannot go to offset "+e);n.loadRequest(NSURLRequest.requestWithURL(n.backForwardList().itemAtIndex(e)))},i.isCrashed=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},i.setUserAgent=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},i.getUserAgent=function(){const e=n.customUserAgent();return e?String(e):void 0},i.insertCSS=function(e){var t="var style = document.createElement('style'); style.innerHTML = "+e.replace(/"/,'\\"')+"; document.head.appendChild(style);",r=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);n.configuration().userContentController().addUserScript(r)},i.insertJS=function(e){var t=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(e,0,!0);n.configuration().userContentController().addUserScript(t)},i.executeJavaScript=a(n,e),i.setIgnoreMenuShortcuts=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},i.setAudioMuted=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},i.isAudioMuted=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},i.setZoomFactor=function(e){n.setMagnification_centeredAtPoint(e,CGPointMake(0,0))},i.getZoomFactor=function(e){e(Number(n.magnification()))},i.setZoomLevel=function(e){i.setZoomFactor(Math.pow(1.2,e))},i.getZoomLevel=function(e){e(Math.log(Number(n.magnification()))/Math.log(1.2))},i.setVisualZoomLevelLimits=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},i.setLayoutZoomLevelLimits=function(){console.warn("Not implemented yet, please open a PR on https://github.com/skpm/sketch-module-web-view :)")},i.send=function(){const e="window.postMessage({isSketchMessage: true,origin: '"+String(__command.identifier())+"',args: "+JSON.stringify([].slice.call(arguments))+'}, "*")';n.evaluateJavaScript_completionHandler(e,null)},i.getNativeWebview=function(){return n},e.webContents=i}},function(e,t){function n(e,t,n,r){n.addConstraint(NSLayoutConstraint.constraintWithItem_attribute_relatedBy_toItem_attribute_multiplier_constant(t,e,NSLayoutRelationEqual,n,e,1,r))}e.exports=function(e,t,r){r=r||[],e.setTranslatesAutoresizingMaskIntoConstraints(!1),n(NSLayoutAttributeLeft,e,t,r[0]||0),n(NSLayoutAttributeTop,e,t,r[1]||0),n(NSLayoutAttributeRight,e,t,r[2]||0),n(NSLayoutAttributeBottom,e,t,r[3]||0)}},function(e,t){e.exports=function(e,t){var n=e.convertPoint_fromView(t.locationInWindow(),null);return"var el = document.elementFromPoint("+n.x+", "+n.y+'); if (el && el.tagName === "SELECT") {  var event = document.createEvent("MouseEvents");  event.initMouseEvent("mousedown", true, true, window);  el.dispatchEvent(event);} else if (el && ["text", "textarea", "date", "datetime-local", "email", "number", "month", "password", "search", "tel", "time", "url", "week" ].indexOf(el.type) >= 0 && el.focus) {el.focus();} else if (el) {el.dispatchEvent(new Event("click", {bubbles: true}))}'}},function(e,t,n){var r=n(1);e.exports=function(e){var t='window.originalPostMessage = window.postMessage;window.postMessage = function(actionName) {  if (!actionName) {    throw new Error(\'missing action name\')  }  var id = String(Math.random()).replace(".", "");    var args = [].slice.call(arguments);    args.unshift(id);  return new Promise(function (resolve, reject) {    window["'+r.JS_BRIDGE_RESULT_SUCCESS+'" + id] = resolve;    window["'+r.JS_BRIDGE_RESULT_ERROR+'" + id] = reject;    window.webkit.messageHandlers.'+r.JS_BRIDGE+".postMessage(JSON.stringify(args));  });}",n=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);e.configuration().userContentController().addUserScript(n)}},function(e,t,n){var r=n(1);e.exports.injectScript=function(e){var t='(function () {document.addEventListener(\'mousedown\', onMouseDown);function shouldDrag(target) {  if (!target || (target.dataset || {}).appRegion === "no-drag") { return false }  if ((target.dataset || {}).appRegion === "drag") { return true }  return shouldDrag(target.parentElement)};function onMouseDown(e) {  if (e.button !== 0 || !shouldDrag(e.target)) { return }  window.postMessage("'+r.START_MOVING_WINDOW+'");};})()',n=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly(t,0,!0);e.configuration().userContentController().addUserScript(n)},e.exports.setupHandler=function(e){var t=null,n=null,a=null;function i(){if(!n||1!==NSEvent.pressedMouseButtons())return clearInterval(a),t=null,void(n=null);var r=NSEvent.mouseLocation();e.setPosition(n.x+(r.x-t.x),n.y+(t.y-r.y),!1)}e.webContents.on(r.START_MOVING_WINDOW,(function(){t=NSEvent.mouseLocation();var r=e.getPosition();n={x:r[0],y:r[1]},a=setInterval(i,1e3/60)}))}},function(e,t,n){(function(t){var r,a,i,o,c=n(17),s=n(18),u=n(1);e.exports=function(e,n,l,f){o||(o=new c({utils:null,"observeValueForKeyPath:ofObject:change:context:":function(){this.utils.executeJavaScript("document.body.classList.remove('__skpm-"+("undefined"!=typeof MSTheme&&MSTheme.sharedTheme().isDark()?"light":"dark")+"'); document.body.classList.add('__skpm-"+("undefined"!=typeof MSTheme&&MSTheme.sharedTheme().isDark()?"dark":"light")+"')")}})),r||(r=new c({utils:null,panel:null,"windowDidResize:":function(){this.utils.emit("resize")},"windowDidMiniaturize:":function(){this.utils.emit("minimize")},"windowDidDeminiaturize:":function(){this.utils.emit("restore")},"windowDidEnterFullScreen:":function(){this.utils.emit("enter-full-screen")},"windowDidExitFullScreen:":function(){this.utils.emit("leave-full-screen")},"windowDidMove:":function(){this.utils.emit("move"),this.utils.emit("moved")},"windowShouldClose:":function(){var e=1;return this.utils.emit("close",{get defaultPrevented(){return!e},preventDefault:function(){e=0}}),e},"windowWillClose:":function(){this.utils.emit("closed")},"windowDidBecomeKey:":function(){this.utils.emit("focus",this.panel.currentEvent())},"windowDidResignKey:":function(){this.utils.emit("blur")}})),a||(a=new c({state:{wasReady:0},utils:null,"webView:didCommitNavigation:":function(e){this.utils.emit("will-navigate",{},String(String(e.URL())))},"webView:didStartProvisionalNavigation:":function(){this.utils.emit("did-start-navigation"),this.utils.emit("did-start-loading")},"webView:didReceiveServerRedirectForProvisionalNavigation:":function(){this.utils.emit("did-get-redirect-request")},"webView:didFailProvisionalNavigation:withError:":function(e,t,n){this.utils.emit("did-fail-load",n)},"webView:didFinishNavigation:":function(){0==this.state.wasReady&&(this.state.wasReady=1,this.utils.emitBrowserEvent("ready-to-show")),this.utils.emit("did-navigate"),this.utils.emit("did-frame-navigate"),this.utils.emit("did-stop-loading"),this.utils.emit("did-finish-load"),this.utils.emit("did-frame-finish-load")},"webViewWebContentProcessDidTerminate:":function(){this.utils.emit("dom-ready")}})),i||(i=new c({utils:null,"userContentController:didReceiveScriptMessage:":function(e,t){var n=this.utils.parseWebArguments(String(t.body()));n&&n[0]&&"string"==typeof n[0]&&(n[0]=String(n[0]),this.utils.emit.apply(this,n))}}));var d=o.new({utils:{executeJavaScript(e){l.evaluateJavaScript_completionHandler(e,null)}}}),h=WKUserScript.alloc().initWithSource_injectionTime_forMainFrameOnly("document.addEventListener('DOMContentLoaded', function() { document.body.classList.add('__skpm-"+("undefined"!=typeof MSTheme&&MSTheme.sharedTheme().isDark()?"dark":"light")+"') }, false)",0,!0);l.configuration().userContentController().addUserScript(h),NSApplication.sharedApplication().addObserver_forKeyPath_options_context(d,"effectiveAppearance",NSKeyValueChangeNewKey,null),NSThread.mainThread().threadDictionary()[e.id+".themeObserver"]=d;var p=a.new({utils:{setTitle:e.setTitle.bind(e),emitBrowserEvent(){try{e.emit.apply(e,arguments)}catch(t){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw console.error(t),t;process.emit("uncaughtException",t,"uncaughtException")}},emit(){try{e.webContents.emit.apply(e.webContents,arguments)}catch(t){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw console.error(t),t;process.emit("uncaughtException",t,"uncaughtException")}}},state:{wasReady:0}});l.setNavigationDelegate(p);var g=i.new({utils:{emit(n,r){if(r){for(var a=[],i=2;i<arguments.length;i+=1)a.push(arguments[i]);var o=e.webContents.listeners(r);t.all(o.map((function(e){return t.resolve().then((function(){return e.apply(e,a)}))}))).then((function(e){l.evaluateJavaScript_completionHandler(u.JS_BRIDGE_RESULT_SUCCESS+n+"("+JSON.stringify(e)+")",null)})).catch((function(e){l.evaluateJavaScript_completionHandler(u.JS_BRIDGE_RESULT_ERROR+n+"("+JSON.stringify(e)+")",null)}))}else l.evaluateJavaScript_completionHandler(u.JS_BRIDGE_RESULT_SUCCESS+n+"()",null)},parseWebArguments:s}});l.configuration().userContentController().addScriptMessageHandler_name(g,u.JS_BRIDGE);var m,v={emit(){try{e.emit.apply(e,arguments)}catch(t){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw console.error(t),t;process.emit("uncaughtException",t,"uncaughtException")}}};f.modal&&((m="Document"===f.parent.type?f.parent.sketchObject:f.parent)&&"MSDocumentData"===String(m.class())&&(m=m.delegate()),v.parentWindow=m.windowForSheet());var b=r.new({utils:v,panel:n});n.setDelegate(b)}}).call(this,n(8))},function(module,exports){module.exports=function MochaDelegate(definition,superclass){var uniqueClassName="MochaJSDelegate_DynamicClass_"+NSUUID.UUID().UUIDString(),delegateClassDesc=MOClassDescription.allocateDescriptionForClassWithName_superclass_(uniqueClassName,superclass||NSObject),handlers={},ivars={};function setHandlerForSelector(selectorString,func){var handlerHasBeenSet=selectorString in handlers,selector=NSSelectorFromString(selectorString);if(handlers[selectorString]=func,!handlerHasBeenSet){for(var args=[],regex=/:/g;regex.exec(selectorString);)args.push("arg"+args.length);var dynamicFunction=eval("(function ("+args.join(", ")+") { return handlers[selectorString].apply(this, arguments); })");delegateClassDesc.addInstanceMethodWithSelector_function(selector,dynamicFunction)}}function setIvar(e,t){var n=e in handlers;if(ivars[e]=t,!n){delegateClassDesc.addInstanceVariableWithName_typeEncoding(e,"@");var r=MOPropertyDescription.new();r.name=e,r.typeEncoding="@",r.weak=!0,r.ivarName=e,delegateClassDesc.addProperty(r)}}this.getClass=function(){return NSClassFromString(uniqueClassName)},this.getClassInstance=function(e){var t=NSClassFromString(uniqueClassName).new();return Object.keys(ivars).forEach((function(e){t[e]=ivars[e]})),Object.keys(e||{}).forEach((function(n){t[n]=e[n]})),t},this.new=this.getClassInstance,"object"==typeof definition&&Object.keys(definition).forEach((function(e){"function"==typeof definition[e]?setHandlerForSelector(e,definition[e]):setIvar(e,definition[e])})),delegateClassDesc.registerClass()}},function(e,t){e.exports=function(e){var t=null;try{t=JSON.parse(e)}catch(n){}return t&&t.constructor&&t.constructor===Array&&0!=t.length?t:null}},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/c51dab97c1511095e6fdf42b42923bf2.html"},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/61788c2fbcc7fdc32186c826617effa2.html"},function(e,t){e.exports="file://"+String(context.scriptPath).split(".sketchplugin/Contents/Sketch")[0]+".sketchplugin/Contents/Resources/_webpack_resources/30cc05feaf2b8eb274da7b6fd6b2552e.html"},function(e,t,n){"use strict";n.r(t);var r=n(5),a=n.n(r),i=n(3),o=n.n(i),c=n(2),s=n.n(c),u=n(0),l=n(9),f=n.n(l),d=function e(t,n,r){n.length>0&&n.forEach((function(n){if(n.sketchObject.hasClippingMask()){var a=n.index,i=n.parent,o=function(e){for(var t=e;"Group"===t.type;)t=t.layers[0];return t}(n),c=function(e,t){var n=e.duplicate(),r=n.style.fills.filter((function(e){return e.enabled})),a=r?r[r.length-1]:null;a?a.color="".concat(f()(a.color).alpha(1)):n.style.fills=[{color:"#000",fillType:"Color"}],n.frame.x=0,n.frame.y=0,n.style.borders=[],n.style.shadows=[],n.style.innerShadows=[],n.style.opacity=1;var i=t.export(n,{formats:"svg",output:!1}),o=t.createLayerFromData(i,"svg").layers[0];return o.name="srm.mask.shape",n.remove(),o}(o,r),s=c.frame.width!==o.frame.width?(o.frame.width-c.frame.width)/2:o.frame.x,u=new r.Group({name:"srm.mask",frame:Object.assign(Object.assign({},c.frame),{x:s}),layers:[c]});i.layers.splice(a,1,u),"Group"===n.type&&n.layers.forEach((function(e){u.layers.push(e)})),i.layers.forEach((function(e,t){t>a&&(e.frame.x=e.frame.x-u.frame.x,e.frame.y=e.frame.y-u.frame.y,u.layers.push(e))}))}else"Group"===n.type&&e(t,n.layers,r)}))},h=function(e,t,n){var r=t.duplicate();return r.frame.x=0,r.frame.y=0,r.background.includedInExport=!0,function e(t){t.length>0&&t.forEach((function(t){"Group"===t.type?e(t.layers):"HotSpot"!==t.type&&"Slice"!==t.type&&"Artboard"!==t.type||t.remove()}))}(r.layers),function e(t){t.length>0&&t.forEach((function(t){"Group"===t.type?e(t.layers):"SymbolInstance"===t.type&&t.detach({recursively:!0})}))}(r.layers),function e(t){t.length>0&&t.forEach((function(t){var n=t.hidden;"Group"!==t.type||n?n&&t.remove():e(t.layers)}))}(r.layers),d(e,r.layers,n),function e(t){t.length>0&&t.forEach((function(t){t.frame.x=Math.round(t.frame.x),t.frame.y=Math.round(t.frame.y),t.frame.width=Math.round(t.frame.width),t.frame.height=Math.round(t.frame.height),"Group"===t.type&&e(t.layers)}))}(r.layers),r};function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e,t,n){var r,a,i=t.duplicate();return i.parent=e,n.export(i,(p(r={scales:"1, 2",formats:"png",output:NSTemporaryDirectory()},"use-id-for-name",!0),p(r,"save-for-web",!0),p(r,"overwriting",!0),r)),i.remove(),{id:t.image.id,src:(a={},p(a,"1x","".concat(NSTemporaryDirectory()).concat(i.id,".png")),p(a,"2x","".concat(NSTemporaryDirectory()).concat(i.id,"@2x.png")),a)}},m=function(e,t,n){var r,a,i=t.style.fills.filter((function(e){return e.enabled&&"Gradient"===e.fillType})),o=i[i.length-1],c=new n.ShapePath({parent:e,frame:t.frame,style:{fills:[o],borders:[]}});return n.export(c,(p(r={scales:"1, 2",formats:"png",output:NSTemporaryDirectory()},"use-id-for-name",!0),p(r,"save-for-web",!0),p(r,"overwriting",!0),r)),c.remove(),{id:t.id,src:(a={},p(a,"1x","".concat(NSTemporaryDirectory()).concat(c.id,".png")),p(a,"2x","".concat(NSTemporaryDirectory()).concat(c.id,"@2x.png")),a)}},v=function(e,t,n){var r,a,i=t.nsimage.size().width,o=t.nsimage.size().height,c=new n.Image({image:t,parent:e,frame:{width:i,height:o,x:0,y:0}});return n.export(c,(p(r={scales:"1, 2",formats:"png",output:NSTemporaryDirectory()},"use-id-for-name",!0),p(r,"save-for-web",!0),p(r,"overwriting",!0),r)),c.remove(),{id:t.id,src:(a={},p(a,"1x","".concat(NSTemporaryDirectory()).concat(c.id,".png")),p(a,"2x","".concat(NSTemporaryDirectory()).concat(c.id,"@2x.png")),a)}},b=function(e,t,n){return function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return n.length>0&&n.forEach((function(n){if("Group"===n.type)e(t,n.layers,r,a);else if("Image"===n.type){var i=g(t,n,r);a.push(i)}else"Shape"!==n.type&&"ShapePath"!==n.type||n.style.fills.forEach((function(e){if(null!==e.pattern.image&&e.enabled){var i=v(t,e.pattern.image,r);a.push(i)}else if("Gradient"===e.fillType&&e.enabled){var o=m(t,n,r);a.push(o)}}))})),a}(e,t,n)};function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e,t,n,r){var a,i=0,o=t.style.borders.filter((function(e){return e.enabled}));o&&o.forEach((function(e){e.thickness>i&&(i=e.thickness)}));var c=t.duplicate();return c.parent=e,c.style.opacity=1,c.transform.rotation=0,c.transform.flippedHorizontally=!1,c.transform.flippedVertically=!1,n.export(c,(y(a={formats:"svg",output:NSTemporaryDirectory()},"use-id-for-name",!0),y(a,"overwriting",!0),a)),t.frame.width=Math.round(t.frame.width+1.5*i),t.frame.height=Math.round(t.frame.height+1.5*i),t.frame.x=Math.round(t.frame.x-1.5*i/2),t.frame.y=Math.round(t.frame.y-1.5*i/2),c.remove(),{id:r||t.id,src:"".concat(NSTemporaryDirectory()).concat(c.id,".svg")}},S=function(e,t,n){return new t.Shape({name:n||e.name,frame:e.frame,style:e.style,transform:{rotation:e.transform.rotation,flippedHorizontally:e.transform.flippedHorizontally,flippedVertically:e.transform.flippedVertically}})},_=function(e,t,n){var r=e.name.substr(n.length,e.name.length-n.length).trim();return S(e,t,r)},N=function(e,t,n){return function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return n.length>0&&n.forEach((function(i,o){if("Group"===i.type)if(i.name.startsWith("[srm.svg]")){var c=_(i,r,"[srm.svg]"),s=w(t,i,r,c.id);a.push(s),n.splice(o,1,c)}else e(t,i.layers,r,a);else if("Shape"===i.type){var u=w(t,i,r);a.push(u)}else if("ShapePath"===i.type){var l=!i.closed,f="Rectangle"!==i.shapeType,d="Oval"!==i.shapeType,h=f&&d,p=i.style.borderOptions.dashPattern.length>0;if(l||h||p){var g=S(i,r),m=w(t,i,r,g.id);a.push(m),n.splice(o,1,g)}}})),a}(e,t,n)},M=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.length>0&&t.forEach((function(t){if("Group"===t.type)e(t.layers,n);else if("Text"===t.type){var r=t.style.fontFamily,a=NSFontManager.sharedFontManager().availableFontFamilies(),i=Array.from(a,(function(e){return String(e)})).includes(r);n&&i&&!n.includes(r)&&n.push(r)}})),n};var k=function(e,t){var n=t.export(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({scales:"0.10",formats:"png",output:!1},"save-for-web",!0)),r=new t.Image({image:n}).image.nsdata.base64EncodedStringWithOptions(0);return"data:image/png;base64, ".concat(r)},C=function(e,t,n,r){var a=h(e,t,n),i=b(e,a.layers,n),o=N(e,a.layers,n),c=k(a,n),s=M(a.layers);a.remove(),r({artboard:a,images:i,svgs:o,notes:[],fonts:s,artboardImage:c})};function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=function(){var e=NSFileManager.defaultManager().URLsForDirectory_inDomains(NSLibraryDirectory,8)[0],t=e?e.absoluteString().replace("file://",""):null;return(t?NSFileManager.defaultManager().fileExistsAtPath("".concat(t,"Fonts")):null)?"".concat(t,"Fonts/"):null},R=function(){var e=NSFileManager.defaultManager().URLsForDirectory_inDomains(NSLibraryDirectory,1)[0],t=e?e.absoluteString().replace("file://",""):null;return(t?NSFileManager.defaultManager().fileExistsAtPath("".concat(t,"Fonts")):null)?"".concat(t,"Fonts/"):null},W=function(){var e=NSFileManager.defaultManager().URLsForDirectory_inDomains(NSLibraryDirectory,8)[0],t=e?e.absoluteString().replace("file://",""):null;return(t?NSFileManager.defaultManager().fileExistsAtPath("".concat(t,"Fonts/Supplemental")):null)?"".concat(t,"Fonts/Supplemental/"):null},F=function(){var e=R(),t=E(),n=W(),r=[function(){var e=R();if(e){var t=NSFileManager.defaultManager().contentsOfDirectoryAtPath_error(e,nil);return Array.from(t,(function(e){return String(e)}))}return null}(),function(){var e=E();if(e){var t=NSFileManager.defaultManager().contentsOfDirectoryAtPath_error(e,nil);return Array.from(t,(function(e){return String(e)}))}return null}(),function(){var e=W();if(e){var t=NSFileManager.defaultManager().contentsOfDirectoryAtPath_error(e,nil);return Array.from(t,(function(e){return String(e)}))}return null}()],a=[e,t,n].filter((function(e){return null!==e}));return a.length>0?a.map((function(e,t){return{location:e,contents:r[t]}})):null},A=function(e){return NSString.stringWithContentsOfFile_encoding_error(e,4,nil)},P=function(e){var t=NSString.stringWithString(e.content),n=[];NSFileManager.defaultManager().createDirectoryAtPath_withIntermediateDirectories_attributes_error(e.path,!0,nil,nil),n.push(e.path,"/",e.fileName),n=n.join(""),t.writeToFile_atomically_encoding_error(n,!1,4,null)};n.d(t,"onShutdown",(function(){return T}));t.default=function(e){var t=Object(u.getWebview)("srm.appWindow"),r=Object(u.getWebview)("srm.loadingWindow");t?t.close():r&&r.close();var i=a.a.getSelectedDocument(),c=i.selectedPage,l=i.selectedLayers.layers.find((function(e){return"Artboard"===e.type&&e.selected}));if(l){var f=null,d=o.a.getTheme(),h=new s.a({identifier:"srm.loadingWindow",parent:i,modal:!0,show:!1}),p=new s.a({identifier:"srm.appWindow",width:1200,height:900,fullscreenable:!1,show:!1});h.loadURL(n(19));var g=h.webContents;g.on("did-finish-load",(function(){g.executeJavaScript("setLoadingColor('".concat(d,"')")).then((function(){h.show(),p.loadURL(n(20))}))})),g.on("escape",(function(){m.isLoading()||h.close()}));var m=p.webContents;m.on("did-finish-load",(function(){C(c,l,a.a,(function(e){g.executeJavaScript("setLoadingText('Rendering', 'Building spec')").then((function(){f=e,m.executeJavaScript("renderApp(\n            ".concat(JSON.stringify(e),",\n            ").concat(JSON.stringify(d),"\n          )")).then((function(){h.close(),p.maximize(),p.center(),p.show()}))}))}))})),m.on("did-fail-load",(function(){h.close(),p.close(),o.a.alert("Error","Spec failed to load.")})),m.on("save",(function(t){var r=f,a=JSON.parse(t);r.notes=a.notes;var i=function(e){var t=Object.assign({},e);return t.images=e.images.map((function(e){var t;return{id:e.id,src:(t={},x(t,"1x","images/".concat(e.id,".png")),x(t,"2x","images/".concat(e.id,"@2x.png")),t)}})),t.svgs=e.svgs.map((function(e){return{id:e.id,src:"svgs/".concat(e.id,".svg")}})),JSON.stringify(t)}(r),o=function(e){e.document.fileURL()&&e.document.fileURL().path().stringByDeletingLastPathComponent();var t=e.document.displayName().stringByDeletingPathExtension(),n=NSSavePanel.savePanel();return n.setTitle("Export spec"),n.setNameFieldLabel("Export to:"),n.setPrompt("Export"),n.setCanCreateDirectories(!0),n.setNameFieldStringValue(t),n.runModal()==NSOKButton&&n.URL().path()}(e),c=function(e){return e.scriptPath.stringByDeletingLastPathComponent().stringByDeletingLastPathComponent().stringByDeletingLastPathComponent()}(e),s="".concat(c,"/Contents/Resources/resources_ui_spec.js"),u="".concat(c,"/Contents/Resources/resources_ui_spec.js.map"),l=n(4).replace("file://",""),d=n(21).replace("file://",""),h=l.substr(-36),p=A(d),g=A(l),m=A(s),v="var SRM_APP_THEME = '".concat(a.theme,"'; var SRM_APP_STORE = ").concat(i,"; ").concat(m),b=A(u);P({content:p,path:o,fileName:"spec.html"}),P({content:g,path:o,fileName:h}),P({content:v,path:o,fileName:"resources_ui_spec.js"}),P({content:b,path:o,fileName:"resources_ui_spec.js.map"}),r.images.length>0&&function(e,t){var n="".concat(t,"/images");NSFileManager.defaultManager().createDirectoryAtPath_attributes(n,nil),e.forEach((function(e){NSFileManager.defaultManager().moveItemAtPath_toPath_error(e.src["1x"],"".concat(n,"/").concat(e.id,".png"),nil),NSFileManager.defaultManager().moveItemAtPath_toPath_error(e.src["2x"],"".concat(n,"/").concat(e.id,"@2x.png"),nil)}))}(r.images,o),r.svgs.length>0&&function(e,t){var n="".concat(t,"/svgs");NSFileManager.defaultManager().createDirectoryAtPath_attributes(n,nil),e.forEach((function(e){NSFileManager.defaultManager().moveItemAtPath_toPath_error(e.src,"".concat(n,"/").concat(e.id,".svg"),nil)}))}(r.svgs,o),r.fonts.length>0&&function(e,t){var n=F(),r="".concat(t,"/fonts");n&&(NSFileManager.defaultManager().createDirectoryAtPath_attributes(r,nil),e.forEach((function(e){n.forEach((function(t){var n=function(e){var t=e.replace(/\s/g,""),n=e.replace(/\s/g,"-");return[e,t,n]}(e),a=t.contents.filter((function(e){return function(e,t){var n=!1,r=e.toUpperCase();return t.forEach((function(e){var t=e.toUpperCase();-1!==r.indexOf(t)&&(n=!0)})),n}(e,n)}));a.length>0&&(NSFileManager.defaultManager().createDirectoryAtPath_attributes("".concat(r,"/").concat(e),nil),a.forEach((function(n){NSFileManager.defaultManager().copyItemAtPath_toPath_error("".concat(t.location,"/").concat(n),"".concat(r,"/").concat(e,"/").concat(n),nil)})))}))})))}(r.fonts,o)}))}else o.a.alert("Invalid Selection","Select an artboard to export.")};var T=function(){var e=Object(u.getWebview)("srm.appWindow"),t=Object(u.getWebview)("srm.loadingWindow");e?e.close():t&&t.close()}}]);if("default"===key&&"function"==typeof exports)exports(context);else{if("function"!=typeof exports[key])throw new Error('Missing export named "'+key+'". Your command should contain something like `export function " + key +"() {}`.');exports[key](context)}}catch(err){if("undefined"==typeof process||!process.listenerCount||!process.listenerCount("uncaughtException"))throw err;process.emit("uncaughtException",err,"uncaughtException")}}globalThis.onRun=__skpm_run.bind(this,"default"),globalThis.onShutdown=__skpm_run.bind(this,"onShutdown");